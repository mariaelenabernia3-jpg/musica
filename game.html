<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mi Vida de YouTuber</title>
    <link rel="stylesheet" href="game-style.css">
</head>
<body>

    <div id="game-container">
        <!-- Panel de Estadísticas del Jugador -->
        <aside id="stats-panel">
            <h3 id="channel-name-display">Cargando...</h3>
            <div id="stats-container">
                <div class="stat-item">
                    <span class="stat-label">⚡ Energía:</span>
                    <span id="energy-value" class="stat-value"></span>
                    <div class="stat-bar"><div id="energy-bar" class="bar-fill"></div></div>
                </div>
                <div class="stat-item">
                    <span class="stat-label">📚 Conocimiento:</span>
                    <span id="knowledge-value" class="stat-value"></span>
                    <div class="stat-bar"><div id="knowledge-bar" class="bar-fill"></div></div>
                </div>
                <div class="stat-item">
                    <span class="stat-label">❤️ Suscriptores:</span>
                    <span id="subs-value" class="stat-value"></span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">💰 Dinero:</span>
                    <span id="money-value" class="stat-value"></span>
                </div>
                <div class="stat-item full-width">
                    <span class="stat-label">🎬 Metraje Grabado:</span>
                    <span id="footage-value" class="stat-value"></span>
                </div>
                <div class="stat-item full-width">
                    <span class="stat-label">📅 Día:</span>
                    <span id="day-value" class="stat-value"></span>
                </div>
            </div>
        </aside>

        <!-- Panel Principal del Juego (Ahora es el Panel de Narración) -->
        <main id="main-panel">
            <div id="room-view">
                <!-- ESTE ES EL PÁRRAFO QUE CAMBIARÁ -->
                <p id="narration-text">Cargando tu historia...</p>
            </div>
        </main>

        <!-- Panel de Acciones -->
        <footer id="actions-panel">
            <button id="sleep-button" class="action-btn">Dormir</button>
            <button id="study-button" class="action-btn">Estudiar</button>
            <button id="work-button" class="action-btn">Trabajar</button>
            <button id="play-games-button" class="action-btn">Jugar Videojuegos</button>
            <button id="computer-button" class="action-btn">Usar Ordenador</button>
        </footer>
    </div>

    <!-- === MODALES === -->
    <div id="story-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2 id="story-title">El Comienzo de un Sueño</h2>
            <p id="story-text">Desde que eras un niño pequeño, te quedabas horas viendo videos en ViewTube. Te fascinaba cómo una persona podía entretener y conectar con millones...</p>
            <button id="next-story-btn">Siguiente</button>
        </div>
    </div>

    <div id="intro-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>Crea tu Canal</h2>
            <p>Has decidido que es tu momento. Vas a ser un YouTuber. Pero primero, tu canal necesita un nombre.</p>
            <input type="text" id="channel-name-input" placeholder="Nombre de tu canal..." maxlength="20">
            <button id="start-game-button">¡Crear Canal!</button>
        </div>
    </div>
    
    <div id="computer-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>Mi Ordenador</h2>
            <div class="computer-actions-grid">
                <button id="record-video-button" class="computer-btn">Grabar Video</button>
                <button id="edit-video-button" class="computer-btn">Editar Video</button>
                <button id="upload-video-button" class="computer-btn">Subir Video</button>
                <button id="buy-games-button" class="computer-btn">Tienda de Juegos</button>
                <button id="upgrade-pc-button" class="computer-btn">Mejorar PC</button>
                <button id="leaderboard-button" class="computer-btn">Tabla de Canales</button>
            </div>
            <button id="back-to-room-button" class="modal-back-button">Volver a la Habitación</button>
        </div>
    </div>

    <div id="leaderboard-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>Tabla de Clasificación de ViewTube</h2>
            <table id="leaderboard-table">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Canal</th>
                        <th>Suscriptores</th>
                    </tr>
                </thead>
                <tbody id="leaderboard-body"></tbody>
            </table>
            <button id="back-to-computer-button-leaderboard" class="modal-back-button">Volver</button>
        </div>
    </div>

    <div id="recording-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>¡Grabando!</h2>
            <p>¡Haz clic lo más rápido que puedas para grabar!</p>
            <div id="click-target"><span>CLIC AQUÍ</span></div>
            <div class="stat-bar recording-progress"><div id="recording-progress-bar" class="bar-fill"></div></div>
        </div>
    </div>

    <div id="working-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>¡A trabajar!</h2>
            <p>¡Haz clic lo más rápido que puedas para ganar dinero!</p>
            <div id="work-click-target"><span>CLIC AQUÍ</span></div>
            <div class="stat-bar recording-progress"><div id="working-progress-bar" class="bar-fill"></div></div>
        </div>
    </div>

    <div id="exam-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>Resultados del Examen</h2>
            <p id="exam-result-text"></p>
            <button id="close-exam-modal-button" class="action-btn">Continuar</button>
        </div>
    </div>

    <div id="editing-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>Editando Video...</h2>
            <p>El renderizado está en progreso. ¡Ten paciencia!</p>
            <div class="stat-bar recording-progress"><div id="editing-progress-bar" class="bar-fill"></div></div>
            <span id="editing-timer"></span>
        </div>
    </div>

    <div id="upgrade-pc-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>Mejorar Ordenador</h2>
            <div id="upgrade-info"></div>
            <button id="buy-upgrade-button" class="action-btn"></button>
            <button id="back-to-computer-button-upgrade" class="modal-back-button">Volver</button>
        </div>
    </div>
    
    <div id="game-shop-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>Tienda de Juegos</h2>
            <div id="shop-items-container"></div>
            <button id="back-to-computer-button-shop" class="modal-back-button">Volver</button>
        </div>
    </div>

    <div id="select-game-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>¿Qué quieres grabar?</h2>
            <div id="owned-games-container"></div>
            <button id="back-to-computer-button-select" class="modal-back-button">Cancelar</button>
        </div>
    </div>

    <div id="upload-video-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>Subir Video</h2>
            <p>Tu video está listo. ¡Ponle un título genial!</p>
            <input type="text" id="video-title-input" placeholder="Ej: Mi primera partida...">
            <button id="confirm-upload-button" class="action-btn">Subir a ViewTube</button>
            <button id="back-to-computer-button-upload" class="modal-back-button">Cancelar</button>
        </div>
    </div>
    
    <div id="play-games-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>¿A qué quieres jugar?</h2>
            <div id="owned-games-to-play-container"></div>
            <button id="back-to-room-from-play-select-button" class="modal-back-button">Cancelar</button>
        </div>
    </div>
    
    <div id="snake-game-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>Serpiente Pixelada</h2>
            <p>Puntuación: <span id="snake-score">0</span></p>
            <canvas id="snake-canvas" width="400" height="400"></canvas>
            <div id="snake-controls">
                <button id="snake-up" class="snake-control-btn">▲</button>
                <button id="snake-left" class="snake-control-btn">◀</button>
                <button id="snake-down" class="snake-control-btn">▼</button>
                <button id="snake-right" class="snake-control-btn">▶</button>
            </div>
            <p id="snake-game-over" class="hidden">¡FIN DEL JUEGO!</p>
            <button id="close-snake-game-button" class="modal-back-button">Salir del Minijuego</button>
        </div>
    </div>

    <div id="penalty-game-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>Tiro de Gloria</h2>
            <p>¡Elige a dónde chutar el penalti!</p>
            <div id="penalty-actions">
                <button class="action-btn" data-shot="left">Izquierda</button>
                <button class="action-btn" data-shot="center">Centro</button>
                <button class="action-btn" data-shot="right">Derecha</button>
            </div>
            <h3 id="penalty-result"></h3>
        </div>
    </div>

    <div id="notification-container"></div>

    <script src="game-script.js"></script>
</body>
</html>